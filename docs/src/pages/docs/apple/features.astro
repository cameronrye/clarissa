---
import Docs from '../../../layouts/Docs.astro';

const base = import.meta.env.BASE_URL;
---

<Docs title="Apple Apps - Features" description="Explore the features of Clarissa for iOS and macOS">
  <h1>Features</h1>
  <p>
    Clarissa for Apple is designed to take full advantage of the platform, integrating deeply
    with iOS, macOS, and watchOS capabilities while maintaining the powerful AI assistant features
    you expect.
  </p>

  <div class="screenshot-row">
    <figure class="screenshot phone">
      <img src={`${base}images/iphone/02-conversation-calendar.png`} alt="Calendar conversation on iPhone" loading="lazy" />
      <figcaption>iPhone</figcaption>
    </figure>
    <figure class="screenshot desktop">
      <img src={`${base}images/mac/02-conversation-calendar.png`} alt="Calendar conversation on Mac" loading="lazy" />
      <figcaption>Mac</figcaption>
    </figure>
    <figure class="screenshot watch-fig">
      <img src={`${base}images/watch/02-watch-response.png`} alt="Response on Apple Watch" loading="lazy" />
      <figcaption>Watch</figcaption>
    </figure>
  </div>

  <h2>On-Device AI with Apple Foundation Models</h2>
  <p>
    Clarissa uses Apple's Foundation Models framework for completely private, on-device AI:
  </p>
  <ul>
    <li><strong>Privacy-first</strong> — All processing happens on your device</li>
    <li><strong>No internet required</strong> — Works offline after initial setup</li>
    <li><strong>Native tool calling</strong> — Tools execute through Apple's native API</li>
    <li><strong>Fast responses</strong> — Optimized for Apple Silicon with model prewarming</li>
    <li><strong>Private Cloud Compute</strong> — Seamless fallback to Apple's privacy-preserving server inference (with consent toggle)</li>
    <li><strong>Provider fallback</strong> — Suggests OpenRouter when Foundation Models encounters an error</li>
  </ul>

  <h2>Conversation Templates</h2>
  <p>
    Pre-built conversation starters with specialized system prompts, pre-enabled tools, and response tuning:
  </p>
  <ul>
    <li><strong>Morning Briefing</strong> — Weather + calendar + reminders summary for your day ahead</li>
    <li><strong>Meeting Prep</strong> — Event details + attendee info for your next meeting</li>
    <li><strong>Research Mode</strong> — Longer responses with web fetch and memory tools</li>
    <li><strong>Quick Math</strong> — Minimal context, fast calculator answers</li>
    <li><strong>Custom templates</strong> — Create your own with custom system prompts, tools, and response hints</li>
  </ul>
  <p>
    Templates are available from the empty-state picker in chat, via Siri shortcuts
    ("Morning Briefing with Clarissa"), and as Apple Watch quick actions.
  </p>

  <h2>Proactive Intelligence</h2>
  <p>
    When enabled in Settings, Clarissa detects intent in your messages and prefetches relevant data
    before the agent responds:
  </p>
  <ul>
    <li><strong>Weather detection</strong> — Keywords like "cold", "rain", "weather" trigger a weather prefetch</li>
    <li><strong>Schedule detection</strong> — Time patterns like "tomorrow", "at 3pm" trigger a calendar prefetch</li>
    <li><strong>Parallel prefetch</strong> — Multiple intents detected simultaneously with a 2-second timeout</li>
    <li><strong>FM-only</strong> — Only activates with on-device Foundation Models (no API cost)</li>
  </ul>
  <p>
    <em>Note:</em> This feature is opt-in and disabled by default. Enable it in Settings under "Proactive Context."
  </p>

  <h2>Edit, Regenerate & Error Recovery</h2>
  <p>
    Easily recover from dead ends without starting over:
  </p>
  <ul>
    <li><strong>Edit &amp; Resend</strong> — Long-press any user message to edit and resend from that point</li>
    <li><strong>Regenerate</strong> — Long-press any assistant message to regenerate the response</li>
    <li><strong>Undo</strong> — One-level undo with ephemeral snapshot and banner</li>
    <li><strong>Auto error recovery</strong> — When the context window is exceeded, Clarissa automatically summarizes the conversation and retries</li>
    <li><strong>Manual summarize</strong> — Tap "Summarize conversation" in the context indicator to proactively manage context</li>
  </ul>

  <h2>Agent Visibility</h2>
  <p>
    See exactly what Clarissa is doing during multi-tool execution:
  </p>
  <ul>
    <li><strong>Tool plan view</strong> — Step-by-step progress displayed inline in chat</li>
    <li><strong>Live Activity</strong> — Dynamic Island and Lock Screen show real-time plan progress</li>
    <li><strong>Human-readable steps</strong> — Tool calls are translated to descriptions like "Checking your calendar..."</li>
  </ul>
  <figure class="screenshot-inline">
    <img src={`${base}images/iphone/06-tool-execution.png`} alt="Tool execution progress on iPhone" loading="lazy" />
    <figcaption>Real-time tool execution with step-by-step progress</figcaption>
  </figure>

  <h2>Voice Input</h2>
  <p>
    Speak naturally to Clarissa using built-in speech recognition:
  </p>
  <ul>
    <li><strong>SpeechAnalyzer</strong> (iOS 26+) — Dramatically faster and more accurate transcription</li>
    <li>Tap the <strong>microphone button</strong> to start dictation</li>
    <li>Speak your prompt naturally</li>
    <li>Tap again to stop and send</li>
    <li><strong>Legacy fallback</strong> to SFSpeechRecognizer on older devices</li>
  </ul>
  <figure class="screenshot-inline">
    <img src={`${base}images/iphone/05-voice-mode.png`} alt="Voice input mode on iPhone" loading="lazy" />
    <figcaption>Voice input with live transcription</figcaption>
  </figure>

  <h2>Siri Shortcuts Integration</h2>
  <p>
    Clarissa exposes App Intents for use with Siri and the Shortcuts app:
  </p>

  <h3>"Ask Clarissa"</h3>
  <p>Invoke Clarissa with your voice:</p>
  <ul>
    <li>"Hey Siri, ask Clarissa how to center a div"</li>
    <li>"Hey Siri, talk to Clarissa"</li>
  </ul>

  <h3>Template Shortcuts</h3>
  <p>Start a specific template via Siri:</p>
  <ul>
    <li>"Hey Siri, Morning Briefing with Clarissa"</li>
    <li>"Hey Siri, Meeting Prep with Clarissa"</li>
    <li>"Hey Siri, Research Mode with Clarissa"</li>
    <li>"Hey Siri, Quick Math with Clarissa"</li>
  </ul>

  <h3>Follow-Up Conversations</h3>
  <p>
    Siri supports 5-minute follow-up sessions for back-and-forth conversation without
    repeating the trigger phrase.
  </p>

  <h3>Custom Shortcuts</h3>
  <p>
    Build your own automations in the Shortcuts app. Chain Clarissa with other actions
    to create powerful workflows.
  </p>

  <h2>Native Tools</h2>
  <div class="screenshot-row">
    <figure class="screenshot phone">
      <img src={`${base}images/iphone/03-conversation-weather.png`} alt="Weather tool on iPhone" loading="lazy" />
      <figcaption>Weather</figcaption>
    </figure>
    <figure class="screenshot phone">
      <img src={`${base}images/iphone/04-conversation-reminder.png`} alt="Reminder tool on iPhone" loading="lazy" />
      <figcaption>Reminders</figcaption>
    </figure>
    <figure class="screenshot phone">
      <img src={`${base}images/iphone/07-context-visualizer.png`} alt="Context visualizer on iPhone" loading="lazy" />
      <figcaption>Context</figcaption>
    </figure>
  </div>
  <p>
    The Apple version includes tools deeply integrated with iOS and macOS frameworks:
  </p>
  <ul>
    <li><strong>Calendar</strong> — Create, list, and search events with deep links to Calendar.app and Maps (EventKit)</li>
    <li><strong>Contacts</strong> — Search and view contacts with tap-to-call, message, or email actions</li>
    <li><strong>Reminders</strong> — Create, list, and complete reminders (EventKit)</li>
    <li><strong>Weather</strong> — Current conditions and forecast with expandable hourly/daily charts (WeatherKit + Swift Charts)</li>
    <li><strong>Location</strong> — Get current position with reverse geocoding (CoreLocation)</li>
    <li><strong>Web Fetch</strong> — Retrieve and parse web content with preview cards</li>
    <li><strong>Calculator</strong> — Mathematical calculations with copy-to-clipboard</li>
    <li><strong>Remember</strong> — Store information with auto-tagging, categories, and confidence scoring</li>
    <li><strong>Image Analysis</strong> — OCR, object detection, face detection, AI descriptions (Vision + Foundation Models)</li>
    <li><strong>Document OCR</strong> — Full-document recognition, PDF extraction, handwriting (Vision)</li>
  </ul>

  <h2>Tool Chains</h2>
  <p>
    Chain multiple tools together into reusable, multi-step workflows with output piping:
  </p>
  <ul>
    <li><strong>Argument piping</strong> — Reference previous step outputs with <code>$N.path</code> syntax (e.g., <code>$1.temperature</code>)</li>
    <li><strong>Built-in chains</strong> — Travel Prep, Daily Digest, Meeting Context, and Research &amp; Save</li>
    <li><strong>Custom chains</strong> — Create your own with the chain editor: reorder steps, pick icons, mark steps optional</li>
    <li><strong>Preview &amp; approve</strong> — See planned steps before execution; skip optional steps or cancel</li>
    <li><strong>Progress tracking</strong> — Real-time step-by-step progress displayed inline in chat</li>
    <li><strong>Shortcuts integration</strong> — Run any saved chain from the Shortcuts app with the "Run Tool Chain" action</li>
  </ul>

  <h2>Shortcuts Actions</h2>
  <p>
    8 standalone Shortcuts actions let you use Clarissa's tools directly in any automation:
  </p>
  <ul>
    <li><strong>Get Weather</strong> — Current conditions and forecast for any location</li>
    <li><strong>Get Calendar Events</strong> — Upcoming events for a date range</li>
    <li><strong>Create Reminder</strong> — Add reminders with title, date, and notes</li>
    <li><strong>Search Contacts</strong> — Find contacts by name</li>
    <li><strong>Calculate</strong> — Evaluate math expressions</li>
    <li><strong>Fetch Web Content</strong> — Retrieve and parse any URL</li>
    <li><strong>Save to Memory</strong> — Store information in Clarissa's long-term memory</li>
    <li><strong>Get Current Location</strong> — Your current position with address</li>
    <li><strong>Run Tool Chain</strong> — Execute any saved tool chain</li>
  </ul>
  <p>
    All actions return values that can be piped into other Shortcuts actions for powerful automations.
  </p>

  <h2>Automation Triggers</h2>
  <p>
    Run tool chains automatically based on context:
  </p>
  <ul>
    <li><strong>Time-of-day</strong> — Schedule chains to run at specific times (e.g., Daily Digest every morning)</li>
    <li><strong>Location</strong> — Trigger chains when arriving at or leaving a location</li>
    <li><strong>Focus mode</strong> — Run chains when a Focus mode activates (e.g., Work Focus triggers Meeting Context)</li>
  </ul>
  <p>
    Configure triggers in Settings under Automation. All triggers are managed by the AutomationManager
    and persist across app launches.
  </p>

  <h2>Smart Notifications</h2>
  <p>
    Clarissa proactively notifies you with contextual, actionable alerts:
  </p>
  <ul>
    <li><strong>Scheduled check-ins</strong> — Set per-day check-in times; Clarissa runs your chosen chain and delivers results as a notification</li>
    <li><strong>Calendar alerts</strong> — Get notified before meetings with attendee count and context, powered by EventKit scanning</li>
    <li><strong>Memory reminders</strong> — Detects time-sensitive patterns in your memories (e.g., "follow up by Friday", "check this week") and reminds you</li>
  </ul>
  <p>
    Notification actions include <strong>Reply</strong> (text input), <strong>Snooze</strong> (1 hour),
    <strong>Open</strong>, and <strong>Dismiss</strong>.
  </p>

  <h2>Widgets</h2>
  <p>
    Glanceable information on your Home Screen and Lock Screen:
  </p>
  <ul>
    <li><strong>Morning briefing</strong> — Weather + next event + top reminder, updated on a timeline schedule</li>
    <li><strong>Memory spotlight</strong> — Surfaces contextual memories scored by confidence, time-of-day relevance, and recency</li>
    <li><strong>StandBy card</strong> — Rotating contextual info optimized for StandBy mode on iPhone</li>
    <li><strong>Live Activity</strong> — Dynamic Island and Lock Screen show real-time progress during multi-tool execution</li>
  </ul>

  <h2>Session Intelligence</h2>
  <p>
    Organize and navigate your conversations with powerful session features:
  </p>
  <ul>
    <li><strong>Pin messages</strong> — Long-press to pin important messages; pinned messages appear in a strip above the conversation</li>
    <li><strong>Tags</strong> — Manually tag sessions or let Clarissa auto-detect topics from your conversation</li>
    <li><strong>Favorites</strong> — Star sessions with a swipe action; filter your history to show favorites only</li>
    <li><strong>Enhanced search</strong> — Search across session titles, summaries, tags, and message content</li>
    <li><strong>Session summaries</strong> — AI-generated summaries for quick browsing of past conversations</li>
  </ul>
  <figure class="screenshot-inline">
    <img src={`${base}images/iphone/08-history.png`} alt="Session history on iPhone" loading="lazy" />
    <figcaption>Search and filter conversation history</figcaption>
  </figure>

  <h2>Offline Mode</h2>
  <p>
    Clarissa works even without a network connection:
  </p>
  <ul>
    <li><strong>Network monitoring</strong> — Detects connectivity changes and displays an offline banner</li>
    <li><strong>Cached tool results</strong> — Recently fetched weather, calendar, and other data remain available offline</li>
    <li><strong>Stale data indicators</strong> — Clearly marks when displayed data may be outdated</li>
    <li><strong>On-device AI</strong> — Foundation Models work entirely offline after initial setup</li>
  </ul>

  <h2>Export & Sharing</h2>
  <p>
    Share conversations in multiple formats:
  </p>
  <ul>
    <li><strong>PDF export</strong> — Export conversations as styled PDF documents</li>
    <li><strong>Share as image</strong> — Long-press any assistant message to share as an image</li>
    <li><strong>Code block copy</strong> — Copy code blocks with syntax highlighting</li>
    <li><strong>Markdown export</strong> — Export conversation history as Markdown text</li>
  </ul>

  <h2>Share Extension</h2>
  <p>
    Share content from any app directly to Clarissa:
  </p>
  <ul>
    <li>Share text, URLs, or images from Safari, Notes, Mail, and more</li>
    <li>Shared content appears in a new conversation for immediate processing</li>
    <li><strong>Chain triggers</strong> — Attach a tool chain to shared content and run it with one tap from the banner</li>
    <li>Uses App Group storage for seamless handoff to the main app</li>
  </ul>

  <h2>Session Management</h2>
  <p>
    Conversations are automatically saved and organized:
  </p>
  <ul>
    <li><strong>Auto-save</strong> — Never lose a conversation</li>
    <li><strong>Title generation</strong> — AI-generated titles for easy browsing</li>
    <li><strong>History sidebar</strong> — Quick access to past conversations</li>
    <li><strong>Search &amp; filter</strong> — Search conversation history by date and topic</li>
    <li><strong>Resume anytime</strong> — Pick up where you left off</li>
  </ul>

  <h2>Long-Term Memory</h2>
  <p>
    Clarissa remembers important information across conversations with an intelligent memory system:
  </p>
  <ul>
    <li><strong>Categories</strong> — Facts, preferences, routines, and relationships</li>
    <li><strong>Confidence scoring</strong> — Memories decay when unused and boost when accessed</li>
    <li><strong>Relationship linking</strong> — Related memories are connected for richer context</li>
    <li><strong>Relevance ranking</strong> — Multi-factor retrieval weighted by topic, confidence, recency, and category</li>
    <li><strong>iCloud sync</strong> — Memories sync across devices with timestamp-based conflict resolution</li>
    <li><strong>Memory review</strong> — Manage memories in Settings with category badges and confidence indicators</li>
  </ul>

  <h2>Streaming Responses</h2>
  <p>
    Watch responses appear in real-time as the AI generates them. Tool executions
    are displayed inline so you can see exactly what Clarissa is doing, with step-by-step
    progress in the chat UI and Dynamic Island.
  </p>

  <h2>Liquid Glass Design</h2>
  <p>
    The app embraces Apple's latest design language:
  </p>
  <ul>
    <li><strong>Translucent materials</strong> — Beautiful glass effects throughout</li>
    <li><strong>Adaptive layout</strong> — Optimized for iPhone, iPad, and Mac</li>
    <li><strong>Dark mode</strong> — Full support for system appearance</li>
    <li><strong>Dynamic Type</strong> — Respects your text size preferences</li>
  </ul>

  <h2>Apple Watch Companion</h2>
  <p>
    A voice-first watchOS companion with:
  </p>
  <ul>
    <li><strong>Voice queries</strong> — Ask questions directly from your wrist</li>
    <li><strong>Quick actions</strong> — Morning Briefing and Meeting Prep templates</li>
    <li><strong>Response history</strong> — View recent responses</li>
    <li><strong>Complications</strong> — Quick launch from watch faces</li>
  </ul>
  <div class="screenshot-row">
    <figure class="screenshot watch-fig">
      <img src={`${base}images/watch/01-watch-welcome.png`} alt="Watch welcome screen" loading="lazy" />
      <figcaption>Welcome</figcaption>
    </figure>
    <figure class="screenshot watch-fig">
      <img src={`${base}images/watch/03-watch-quick-actions.png`} alt="Watch quick actions" loading="lazy" />
      <figcaption>Quick Actions</figcaption>
    </figure>
    <figure class="screenshot watch-fig">
      <img src={`${base}images/watch/04-watch-voice-input.png`} alt="Watch voice input" loading="lazy" />
      <figcaption>Voice Input</figcaption>
    </figure>
    <figure class="screenshot watch-fig">
      <img src={`${base}images/watch/06-watch-history.png`} alt="Watch history" loading="lazy" />
      <figcaption>History</figcaption>
    </figure>
  </div>

  <h2>macOS Features</h2>
  <p>
    On macOS, Clarissa includes additional platform-specific features:
  </p>
  <ul>
    <li><strong>Menu bar commands</strong> — File and Edit menus with keyboard shortcuts</li>
    <li><strong>Settings window</strong> — Standard macOS preferences (⌘,)</li>
    <li><strong>Keyboard shortcuts</strong> — ⌘N for new conversation, ⇧⌘⌫ to clear</li>
    <li><strong>Resizable window</strong> — Works at any size</li>
  </ul>
  <div class="screenshot-row">
    <figure class="screenshot desktop">
      <img src={`${base}images/mac/01-welcome.png`} alt="Mac welcome screen" loading="lazy" />
      <figcaption>Welcome</figcaption>
    </figure>
    <figure class="screenshot desktop">
      <img src={`${base}images/mac/09-settings-provider.png`} alt="Mac settings" loading="lazy" />
      <figcaption>Settings</figcaption>
    </figure>
  </div>

  <h2>Next Steps</h2>
  <ul>
    <li>Check the <a href={`${base}docs/apple/faq/`}>FAQ</a> for troubleshooting</li>
    <li>Return to <a href={`${base}docs/apple/getting-started/`}>Getting Started</a></li>
  </ul>
</Docs>

<style>
  .screenshot-row {
    display: flex;
    gap: 1.25rem;
    align-items: flex-end;
    justify-content: center;
    margin: 1.5rem 0 2rem;
    overflow-x: auto;
    padding-bottom: 0.5rem;
  }

  .screenshot {
    flex: 0 0 auto;
    text-align: center;
  }

  .screenshot img {
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    display: block;
  }

  .screenshot figcaption {
    margin-top: 0.5rem;
    font-size: 0.75rem;
    color: var(--color-text-muted);
  }

  .screenshot.phone img {
    height: 320px;
    width: auto;
  }

  .screenshot.desktop img {
    height: 260px;
    width: auto;
  }

  .screenshot.watch-fig img {
    height: 180px;
    width: auto;
  }

  .screenshot-inline {
    margin: 1.5rem 0 2rem;
    text-align: center;
  }

  .screenshot-inline img {
    height: 400px;
    width: auto;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }

  .screenshot-inline figcaption {
    margin-top: 0.5rem;
    font-size: 0.75rem;
    color: var(--color-text-muted);
  }

  @media (max-width: 768px) {
    .screenshot.phone img {
      height: 240px;
    }

    .screenshot.desktop img {
      height: 180px;
    }

    .screenshot.watch-fig img {
      height: 140px;
    }

    .screenshot-inline img {
      height: 300px;
    }

    .screenshot-row {
      gap: 0.75rem;
    }
  }
</style>


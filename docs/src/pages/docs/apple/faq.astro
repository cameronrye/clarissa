---
import Docs from '../../../layouts/Docs.astro';

const base = import.meta.env.BASE_URL;
---

<Docs title="Apple Apps - FAQ" description="Frequently asked questions about Clarissa for iOS and macOS">
  <h1>Frequently Asked Questions</h1>

  <h2>Requirements & Compatibility</h2>

  <h3>What devices are supported?</h3>
  <p>
    Clarissa requires iOS 26+ or macOS 26+ (Tahoe). For on-device AI features, you need 
    an Apple Silicon device with Apple Intelligence enabled:
  </p>
  <ul>
    <li><strong>iPhone</strong> — iPhone 15 Pro or later (A17 Pro chip)</li>
    <li><strong>iPad</strong> — iPads with M1 chip or later</li>
    <li><strong>Mac</strong> — Any Mac with Apple Silicon (M1 or later)</li>
  </ul>

  <h3>Why does the app require iOS/macOS 26?</h3>
  <p>
    Clarissa uses Apple Foundation Models for on-device AI, which is only available in 
    iOS 26 and macOS 26. The app also uses the new Liquid Glass design system introduced 
    in these versions.
  </p>

  <h3>Can I use Clarissa without Apple Intelligence?</h3>
  <p>
    Yes! You can use OpenRouter for cloud-based AI. Add your OpenRouter API key in Settings 
    to access 100+ models including Claude and GPT-4.
  </p>

  <h2>On-Device AI</h2>

  <h3>Is my data private with on-device AI?</h3>
  <p>
    Yes. When using Apple Foundation Models, all processing happens entirely on your device. 
    Your conversations never leave your device and are not sent to any server.
  </p>

  <h3>Why is the first response slow?</h3>
  <p>
    The AI model needs to warm up on first use. Clarissa automatically prewarms the model 
    at launch to minimize this delay. Subsequent responses are much faster.
  </p>

  <h3>What's the tool limit for on-device AI?</h3>
  <p>
    Apple Foundation Models support a maximum of 10 tools per session, with best results at 4-5 tools.
    Clarissa automatically prioritizes the most useful tools. For workflows requiring more
    tools, use OpenRouter. If Foundation Models fails, a banner will suggest switching to OpenRouter.
  </p>

  <h3>What is Private Cloud Compute?</h3>
  <p>
    Private Cloud Compute (PCC) is Apple's privacy-preserving server inference. When the on-device
    model can't handle a request, PCC processes it on Apple's servers with the same privacy guarantees.
    You can enable or disable PCC in Settings under the AI provider section.
  </p>

  <h2>Cloud Providers</h2>

  <h3>How do I get an OpenRouter API key?</h3>
  <ol>
    <li>Visit <a href="https://openrouter.ai" target="_blank" rel="noopener">openrouter.ai</a></li>
    <li>Create an account or sign in</li>
    <li>Go to <a href="https://openrouter.ai/keys" target="_blank" rel="noopener">API Keys</a></li>
    <li>Create a new key and copy it</li>
    <li>Paste it in Clarissa's Settings</li>
  </ol>

  <h3>Which cloud model should I use?</h3>
  <p>
    The default is <code>anthropic/claude-sonnet-4</code>, which offers an excellent balance 
    of capability and speed. You can change this in Settings.
  </p>

  <h3>Is my API key stored securely?</h3>
  <p>
    Yes. API keys are stored in the iOS/macOS Keychain, Apple's secure credential storage 
    system. They are never transmitted except to the API provider.
  </p>

  <h2>Voice & Siri</h2>

  <h3>Why isn't voice input working?</h3>
  <p>
    Ensure you've granted microphone permission. Go to Settings → Clarissa → Microphone 
    and enable access. If it's already enabled, try restarting the app.
  </p>

  <h3>Siri doesn't recognize my Clarissa commands</h3>
  <p>
    Siri Shortcuts need time to learn. Try these tips:
  </p>
  <ul>
    <li>Use the exact phrases: "Ask Clarissa", "Talk to Clarissa", or template names like "Morning Briefing with Clarissa"</li>
    <li>Open the Shortcuts app and run the intent manually first</li>
    <li>Make sure Siri is enabled and listening</li>
  </ul>

  <h3>Can I have a back-and-forth conversation with Siri?</h3>
  <p>
    Yes! Siri supports 5-minute follow-up sessions. After the first response, you can ask
    follow-up questions without repeating the trigger phrase.
  </p>

  <h2>Tool Chains & Automation</h2>

  <h3>What are tool chains?</h3>
  <p>
    Tool chains are multi-step workflows that run several tools in sequence, piping outputs between
    steps. For example, the "Daily Digest" chain fetches your weather, calendar events, and reminders,
    then summarizes everything. Clarissa includes 4 built-in chains, and you can create custom ones
    in the chain editor.
  </p>

  <h3>How do I create a custom tool chain?</h3>
  <p>
    Go to Settings &gt; Automation &gt; Tool Chains &gt; Create New Chain. Add steps, reorder them,
    pick an icon, and use <code>$N.path</code> syntax to pipe outputs between steps (e.g.,
    <code>$1.temperature</code> passes the temperature from step 1 to step 2).
  </p>

  <h3>How do automation triggers work?</h3>
  <p>
    You can set tool chains to run automatically based on time-of-day, location, or Focus mode changes.
    Configure triggers in Settings &gt; Automation. For example, schedule "Daily Digest" to run every
    morning at 7am, or trigger "Meeting Context" when Work Focus activates.
  </p>

  <h3>Can I use Clarissa tools in the Shortcuts app?</h3>
  <p>
    Yes! Clarissa provides 8 standalone Shortcuts actions (Get Weather, Get Calendar Events, Create
    Reminder, Search Contacts, Calculate, Fetch Web Content, Save to Memory, Get Current Location)
    plus a "Run Tool Chain" action. All actions return values that can be piped into other Shortcuts steps.
  </p>

  <h2>Notifications & Widgets</h2>

  <h3>What are scheduled check-ins?</h3>
  <p>
    Check-ins let you schedule Clarissa to run a tool chain at specific times on specific days. The
    results are delivered as a notification. For example, schedule a Daily Digest check-in for
    weekday mornings.
  </p>

  <h3>How do calendar alerts work?</h3>
  <p>
    When enabled, Clarissa monitors your upcoming calendar events and sends a notification before
    meetings that have a significant number of attendees, giving you context before you join.
    Configure the attendee threshold in Settings &gt; Automation &gt; Calendar Alerts.
  </p>

  <h3>What widgets are available?</h3>
  <p>
    Clarissa offers three widgets: a <strong>Morning Briefing</strong> widget (weather + next event +
    top reminder), a <strong>Memory Spotlight</strong> widget (contextual memories based on time of
    day), and a <strong>StandBy</strong> card with rotating information. Add them from the Home Screen
    widget picker.
  </p>

  <h3>Does Clarissa work offline?</h3>
  <p>
    Yes, partially. On-device AI via Foundation Models works entirely offline. Recently fetched tool
    results (weather, calendar, etc.) are cached and available offline with stale data indicators.
    Cloud providers (OpenRouter) require an internet connection. An offline banner appears when
    connectivity is lost.
  </p>

  <h2>Troubleshooting</h2>

  <h3>The app crashes on launch</h3>
  <p>
    Try these steps:
  </p>
  <ol>
    <li>Force quit and relaunch the app</li>
    <li>Restart your device</li>
    <li>Ensure you're on iOS/macOS 26 or later</li>
    <li>Reinstall from the App Store (or TestFlight if using the beta)</li>
  </ol>

  <h3>"Apple Intelligence not available"</h3>
  <p>
    Check these requirements:
  </p>
  <ul>
    <li>Device has Apple Silicon (M1+ on Mac, A17 Pro+ on iPhone)</li>
    <li>Apple Intelligence is enabled in System Settings</li>
    <li>Device language and region support Apple Intelligence</li>
  </ul>

  <h3>Responses are getting cut off</h3>
  <p>
    Long conversations may hit token limits. Clarissa automatically manages context in several ways:
  </p>
  <ul>
    <li><strong>Auto-trimming</strong> — Older messages are trimmed when the token budget is exceeded</li>
    <li><strong>Auto-summarization</strong> — If the context window is exceeded, Clarissa automatically summarizes the conversation and retries</li>
    <li><strong>Manual summarize</strong> — Tap "Summarize conversation" in the context indicator to proactively compress history</li>
    <li><strong>Edit &amp; Resend</strong> — Long-press a message to edit and resend from that point</li>
  </ul>

  <h3>How do I export a conversation?</h3>
  <p>
    Clarissa supports multiple export formats:
  </p>
  <ul>
    <li><strong>PDF</strong> — Export the full conversation as a styled PDF</li>
    <li><strong>Image</strong> — Long-press any assistant message and choose "Share as Image"</li>
    <li><strong>Markdown</strong> — Export as Markdown text</li>
    <li><strong>Code blocks</strong> — Tap the copy button on any code block to copy with syntax highlighting</li>
  </ul>

  <h3>What are conversation templates?</h3>
  <p>
    Templates are pre-configured conversation starters with specialized system prompts and tools.
    Clarissa includes 4 built-in templates (Morning Briefing, Meeting Prep, Research Mode, Quick Math)
    and you can create your own in Settings. Templates are also available via Siri and Apple Watch.
    For multi-step automated workflows, see <strong>tool chains</strong> in Settings &gt; Automation.
  </p>

  <h3>How does the Share Extension work?</h3>
  <p>
    You can share text, URLs, or images from any app to Clarissa using the system Share sheet.
    The shared content will be queued and appear as a new conversation when you open Clarissa.
    You can also attach a tool chain to shared content — a "Run" button on the shared result
    banner lets you execute the chain immediately.
  </p>

  <h3>How do I report a bug?</h3>
  <p>
    You can report issues through:
  </p>
  <ul>
    <li><strong>TestFlight</strong> — Shake your device or use the TestFlight app to send feedback</li>
    <li><strong>GitHub</strong> — Open an issue at <a href="https://github.com/cameronrye/clarissa/issues" target="_blank" rel="noopener">github.com/cameronrye/clarissa</a></li>
  </ul>

  <h2>More Help</h2>
  <ul>
    <li><a href={`${base}docs/apple/getting-started/`}>Getting Started</a></li>
    <li><a href={`${base}docs/apple/features/`}>Features</a></li>
    <li><a href={`${base}support/`}>Support</a></li>
  </ul>
</Docs>


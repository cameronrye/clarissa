---
import Docs from '../../layouts/Docs.astro';
---

<Docs title="Commands & Usage" description="Learn how to use Clarissa's commands and features">
  <h1>Commands & Usage</h1>
  <p>
    Clarissa provides a conversational interface for interacting with AI. Simply type your
    questions or requests, and Clarissa will respond, using tools as needed.
  </p>

  <h2>Interactive Mode</h2>
  <p>Launch Clarissa in interactive mode:</p>
  <pre><code>clarissa</code></pre>

  <h2>One-Shot Mode</h2>
  <p>Run a single command and exit:</p>
  <pre><code>clarissa "What files are in this directory?"</code></pre>
  <pre><code>clarissa -m openai/gpt-4o "Explain this code"</code></pre>

  <h2>Piped Input</h2>
  <p>Pipe content from other commands for AI processing:</p>
  <pre><code>cat error.log | clarissa "Explain this error"</code></pre>
  <pre><code>git diff | clarissa "Write a commit message"</code></pre>

  <h2>CLI Options</h2>
  <table>
    <thead>
      <tr>
        <th>Option</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>-c, --continue</code></td>
        <td>Continue the last session</td>
      </tr>
      <tr>
        <td><code>-m, --model MODEL</code></td>
        <td>Use a specific model</td>
      </tr>
      <tr>
        <td><code>--list-models</code></td>
        <td>List available models</td>
      </tr>
      <tr>
        <td><code>--check-update</code></td>
        <td>Check for available updates</td>
      </tr>
      <tr>
        <td><code>--debug</code></td>
        <td>Enable debug output</td>
      </tr>
      <tr>
        <td><code>-h, --help</code></td>
        <td>Show help</td>
      </tr>
      <tr>
        <td><code>-v, --version</code></td>
        <td>Show version</td>
      </tr>
    </tbody>
  </table>

  <h2>Slash Commands</h2>
  <p>Clarissa supports several slash commands for control and configuration. Type <code>/</code> to see suggestions:</p>
  <table>
    <thead>
      <tr>
        <th>Command</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>/help</code></td>
        <td>Show available commands</td>
      </tr>
      <tr>
        <td><code>/clear</code></td>
        <td>Clear conversation history</td>
      </tr>
      <tr>
        <td><code>/new</code></td>
        <td>Start a new conversation</td>
      </tr>
      <tr>
        <td><code>/save [NAME]</code></td>
        <td>Save current session</td>
      </tr>
      <tr>
        <td><code>/sessions</code></td>
        <td>List saved sessions</td>
      </tr>
      <tr>
        <td><code>/load ID</code></td>
        <td>Load a saved session</td>
      </tr>
      <tr>
        <td><code>/last</code></td>
        <td>Load the most recent session</td>
      </tr>
      <tr>
        <td><code>/delete ID</code></td>
        <td>Delete a saved session</td>
      </tr>
      <tr>
        <td><code>/remember &lt;fact&gt;</code></td>
        <td>Save a memory for future sessions</td>
      </tr>
      <tr>
        <td><code>/memories</code></td>
        <td>List saved memories</td>
      </tr>
      <tr>
        <td><code>/forget &lt;#|ID&gt;</code></td>
        <td>Forget a memory by number or ID</td>
      </tr>
      <tr>
        <td><code>/model [NAME]</code></td>
        <td>Show or switch the current model</td>
      </tr>
      <tr>
        <td><code>/provider [NAME]</code></td>
        <td>Show or switch the LLM provider</td>
      </tr>
      <tr>
        <td><code>/mcp</code></td>
        <td>Show MCP server status</td>
      </tr>
      <tr>
        <td><code>/tools</code></td>
        <td>List available tools</td>
      </tr>
      <tr>
        <td><code>/context</code></td>
        <td>Show context window usage</td>
      </tr>
      <tr>
        <td><code>/yolo</code></td>
        <td>Toggle auto-approve mode (skip tool confirmations)</td>
      </tr>
      <tr>
        <td><code>/version</code></td>
        <td>Show version info</td>
      </tr>
      <tr>
        <td><code>/upgrade</code></td>
        <td>Upgrade to latest version</td>
      </tr>
      <tr>
        <td><code>/exit</code></td>
        <td>Exit Clarissa</td>
      </tr>
    </tbody>
  </table>

  <h2>Usage Examples</h2>
  
  <h3>File Operations</h3>
  <pre><code>Read the contents of package.json</code></pre>
  <pre><code>Create a new file called hello.txt with "Hello, World!"</code></pre>
  <pre><code>Find all TypeScript files containing "async function"</code></pre>

  <h3>Git Operations</h3>
  <pre><code>What's the current git status?</code></pre>
  <pre><code>Show me the recent commit history</code></pre>
  <pre><code>Stage all changes and commit with a descriptive message</code></pre>

  <h3>Shell Commands</h3>
  <pre><code>Run npm test and show me the results</code></pre>
  <pre><code>What's my current disk usage?</code></pre>

  <h3>Web Fetching</h3>
  <pre><code>Fetch the Bun documentation homepage</code></pre>
  <pre><code>What does the OpenRouter API documentation say about rate limits?</code></pre>

  <h2>Tool Confirmation</h2>
  <p>
    When Clarissa attempts to use a potentially dangerous tool (like writing files or 
    running shell commands), you'll be prompted to confirm:
  </p>
  <pre><code>⚠️ Tool: bash
Arguments: &#123;"command": "rm -rf node_modules"&#125;
Approve? (y/n)</code></pre>
  <p>Press <code>y</code> to approve or <code>n</code> to reject the action.</p>

  <h2>Session Management</h2>
  <p>
    Sessions are automatically saved when you exit Clarissa. You can also manually save
    with a custom name:
  </p>
  <pre><code>/save my-project-session</code></pre>

  <p>List saved sessions:</p>
  <pre><code>/sessions</code></pre>

  <p>Load a previous session:</p>
  <pre><code>/load session_id</code></pre>

  <p>Quickly load the most recent session:</p>
  <pre><code>/last</code></pre>

  <p>Or continue from the command line:</p>
  <pre><code>clarissa -c</code></pre>

  <p>Start a fresh conversation without exiting:</p>
  <pre><code>/new</code></pre>

  <p>Delete a session:</p>
  <pre><code>/delete session_id</code></pre>

  <h2>Memory System</h2>
  <p>
    Clarissa can remember facts across sessions. Use the memory system to store
    information that should persist between conversations.
  </p>
  <p>Save a memory:</p>
  <pre><code>/remember Always use TypeScript for new projects</code></pre>

  <p>List all memories:</p>
  <pre><code>/memories</code></pre>

  <p>Forget a memory by number or ID:</p>
  <pre><code>/forget 1</code></pre>
  <p>
    Memories are included in the system prompt, so Clarissa will consider them
    when responding to your requests.
  </p>

  <h2>Switching Models</h2>
  <p>View the current model:</p>
  <pre><code>/model</code></pre>
  <p>Change the AI model during your conversation:</p>
  <pre><code>/model openai/gpt-4o</code></pre>
  <p>
    This is useful for switching between models with different capabilities or costs.
  </p>

  <h2>Switching Providers</h2>
  <p>View the current provider:</p>
  <pre><code>/provider</code></pre>
  <p>Switch to a different LLM provider:</p>
  <pre><code>/provider anthropic</code></pre>
  <p>Available providers: <code>openrouter</code>, <code>openai</code>, <code>anthropic</code>, <code>apple-ai</code>, <code>lmstudio</code>, <code>local-llama</code></p>

  <h2>Local Models</h2>
  <p>Download GGUF models for local inference:</p>
  <pre><code>clarissa download</code></pre>
  <p>List downloaded models:</p>
  <pre><code>clarissa models</code></pre>
  <p>Set a downloaded model as active:</p>
  <pre><code>clarissa use Qwen2.5-7B.gguf</code></pre>
  <p>
    This automatically sets the provider to <code>local-llama</code> and configures the model path.
    Local models run entirely on your machine using node-llama-cpp, with no API calls required.
    This is useful for privacy-sensitive work or offline usage.
  </p>

  <h2>Apple Intelligence (macOS)</h2>
  <p>
    On macOS 26+ with Apple Silicon, Clarissa supports on-device AI using Apple Foundation Models
    with full tool calling support. Switch to the Apple provider:
  </p>
  <pre><code>/provider apple-ai</code></pre>
  <p>Or use the native macOS app directly from the CLI:</p>
  <pre><code>clarissa app "What's the weather today?"</code></pre>
  <p>
    The <code>app</code> command opens the native Clarissa macOS app with your question,
    leveraging Apple Intelligence for private, on-device processing.
  </p>

  <h2>Auto-Approve Mode</h2>
  <p>
    Toggle auto-approve mode to skip tool confirmation prompts:
  </p>
  <pre><code>/yolo</code></pre>
  <p>
    When enabled, Clarissa will automatically execute tools without asking for
    confirmation. Use with caution.
  </p>

  <h2>Context Window</h2>
  <p>
    Clarissa automatically tracks token usage and will truncate older messages when
    approaching the context limit. Use <code>/context</code> to see current usage.
  </p>

  <h2>Keyboard Shortcuts</h2>
  <table>
    <thead>
      <tr>
        <th>Shortcut</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>Ctrl+C</code></td>
        <td>Cancel current operation / Exit</td>
      </tr>
      <tr>
        <td><code>Ctrl+P</code></td>
        <td>Enhance prompt with AI</td>
      </tr>
      <tr>
        <td><code>↑</code> / <code>↓</code></td>
        <td>Navigate input history</td>
      </tr>
      <tr>
        <td><code>Tab</code></td>
        <td>Show command suggestions when typing <code>/</code></td>
      </tr>
    </tbody>
  </table>

  <h2>Updating Clarissa</h2>
  <p>
    Clarissa checks for updates on startup and notifies you when a new version is available.
    To upgrade:
  </p>
  <pre><code>clarissa upgrade</code></pre>
  <p>Or from within interactive mode:</p>
  <pre><code>/upgrade</code></pre>
  <p>To manually check for updates:</p>
  <pre><code>clarissa --check-update</code></pre>
</Docs>


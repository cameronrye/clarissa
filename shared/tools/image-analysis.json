{
  "name": "image_analysis",
  "description": "Analyze images or PDFs using Vision and PDFKit frameworks. Supports OCR (text extraction), image classification, face detection, document detection, and PDF text extraction/OCR. Provide data as base64 or file URL.",
  "category": "utility",
  "priority": 3,
  "requiresConfirmation": false,
  "platforms": ["ios", "macos"],
  "permissions": ["photo_library"],
  "triggers": [
    "analyze image",
    "read text in image",
    "OCR",
    "what's in this image",
    "what's in this photo",
    "identify objects",
    "detect faces",
    "how many people",
    "scan document",
    "extract text",
    "summarize PDF",
    "read PDF",
    "what's in this PDF",
    "extract text from PDF",
    "how many pages"
  ],
  "parameters": {
    "type": "object",
    "properties": {
      "action": {
        "type": "string",
        "enum": ["ocr", "classify", "detect_faces", "detect_document", "pdf_extract_text", "pdf_ocr", "pdf_page_count"],
        "description": "Analysis type: 'ocr' for image text, 'classify' for objects, 'detect_faces' for faces, 'detect_document' for boundaries, 'pdf_extract_text' for searchable PDFs, 'pdf_ocr' for scanned PDFs, 'pdf_page_count' for page count"
      },
      "imageBase64": {
        "type": "string",
        "description": "Base64-encoded image data (PNG, JPEG, or HEIC)"
      },
      "imageURL": {
        "type": "string",
        "format": "uri",
        "description": "File URL to the image (file:// scheme)"
      },
      "pdfBase64": {
        "type": "string",
        "description": "Base64-encoded PDF data"
      },
      "pdfURL": {
        "type": "string",
        "format": "uri",
        "description": "File URL to the PDF (file:// scheme)"
      },
      "pageRange": {
        "type": "string",
        "description": "Page range for PDF operations, e.g., '1-5' or '1,3,5' (optional, defaults to all pages)"
      }
    },
    "required": ["action"]
  },
  "examples": [
    {
      "description": "Extract text from an image (OCR)",
      "input": "What text is in this image?",
      "call": {
        "action": "ocr",
        "imageBase64": "<base64_image_data>"
      },
      "output": "Recognized text:\n1. Meeting at 3pm\n2. Call John\n3. Buy groceries"
    },
    {
      "description": "Identify objects in a photo",
      "input": "What's in this photo?",
      "call": {
        "action": "classify",
        "imageBase64": "<base64_image_data>"
      },
      "output": "Image classification:\n- golden retriever (92.5%)\n- dog (89.3%)\n- domestic animal (85.1%)"
    },
    {
      "description": "Count faces in a group photo",
      "input": "How many people are in this picture?",
      "call": {
        "action": "detect_faces",
        "imageBase64": "<base64_image_data>"
      },
      "output": "Found 4 faces in the image"
    },
    {
      "description": "Detect document in an image",
      "input": "Is there a document in this image?",
      "call": {
        "action": "detect_document",
        "imageBase64": "<base64_image_data>"
      },
      "output": "Document detected covering 78.5% of the image"
    },
    {
      "description": "Analyze image from file URL",
      "input": "Read text from this file",
      "call": {
        "action": "ocr",
        "imageURL": "file:///Users/user/Documents/receipt.jpg"
      },
      "output": "Recognized text:\nReceipt #12345\nTotal: $45.99\nThank you for your purchase!"
    },
    {
      "description": "Extract text from a searchable PDF",
      "input": "Summarize this PDF document",
      "call": {
        "action": "pdf_extract_text",
        "pdfBase64": "<base64_pdf_data>"
      },
      "output": "Extracted 2,450 characters from 3 pages:\n\nQ3 Financial Report\n\nRevenue increased 15% year-over-year..."
    },
    {
      "description": "OCR a scanned PDF document",
      "input": "Read this scanned document",
      "call": {
        "action": "pdf_ocr",
        "pdfURL": "file:///Users/user/Documents/scanned_contract.pdf"
      },
      "output": "OCR completed on 5 pages:\n\n--- Page 1 ---\nSERVICE AGREEMENT\n\nThis agreement is entered into..."
    },
    {
      "description": "Get PDF page count",
      "input": "How many pages is this PDF?",
      "call": {
        "action": "pdf_page_count",
        "pdfBase64": "<base64_pdf_data>"
      },
      "output": "This PDF has 12 pages"
    },
    {
      "description": "Extract specific pages from PDF",
      "input": "Get the text from pages 1-3 of this PDF",
      "call": {
        "action": "pdf_extract_text",
        "pdfURL": "file:///Users/user/Documents/report.pdf",
        "pageRange": "1-3"
      },
      "output": "Extracted text from pages 1-3:\n\nExecutive Summary\n\nThis report outlines..."
    }
  ],
  "notes": [
    "For images: provide imageBase64 or imageURL",
    "For PDFs: provide pdfBase64 or pdfURL",
    "pdf_extract_text is fast for searchable PDFs (text-based)",
    "pdf_ocr renders pages as images and runs OCR (for scanned documents)",
    "pageRange is optional, supports '1-5' or '1,3,5' formats",
    "PDF text is truncated at ~15,000 characters; OCR limited to 10 pages",
    "For OCR, works best with clear, well-lit images",
    "Classification returns top 5 labels with confidence scores"
  ]
}

